BEGIN ~JA#BRULG~

IF ~Global("JA#TALKTOBRULG","%EBaldursGate_ElfsongTavern_L1%",0)~ THEN JA#BRULG_1
  SAY @0
  IF ~~ THEN REPLY @1 DO ~SetGlobal("JA#TALKTOBRULG","%EBaldursGate_ElfsongTavern_L1%",1)~ GOTO JA#BRULG_2
  IF ~~ THEN REPLY @2 EXIT
END

IF ~~ THEN JA#BRULG_2
  SAY @3
  IF ~~ THEN GOTO JA#BRULG_3
END

IF ~~ THEN JA#BRULG_3
  SAY @4
  IF ~~ THEN EXIT
END

IF ~GlobalGT("JA#TALKTOBRULG","%EBaldursGate_ElfsongTavern_L1%",0) GlobalLT("JA#TALKTOBRULG","%EBaldursGate_ElfsongTavern_L1%",3) Global("JA#ELFSONG_QUEST","GLOBAL",2)~ THEN JA#BRULG_10
  SAY @5
  IF ~~ THEN REPLY @6 DO ~SetGlobal("JA#TALKTOBRULG","%EBaldursGate_ElfsongTavern_L1%",3) SetGlobal("JA#ELFSONG_QUEST","GLOBAL",3)~ GOTO JA#BRULG_12
  IF ~~ THEN REPLY @7 EXIT
END

IF ~~ THEN JA#BRULG_12
  SAY @8 = @9
  IF ~~ THEN REPLY @10 GOTO JA#BRULG_13
  IF ~~ THEN REPLY @11 GOTO JA#BRULG_14
END

IF ~~ THEN JA#BRULG_13
  SAY @12 = @13
  IF ~~ THEN REPLY @14 GOTO JA#BRULG_15
END

IF ~~ THEN JA#BRULG_14
  SAY @15 = @16 = @13
  IF ~~ THEN REPLY @14 GOTO JA#BRULG_15
  IF ~~ THEN REPLY @17 UNSOLVED_JOURNAL @1001 EXIT
END

IF ~~ THEN JA#BRULG_15
  SAY @19
  IF ~~ THEN REPLY @20 GOTO JA#BRULG_17
  IF ~~ THEN REPLY @21 UNSOLVED_JOURNAL @1001 EXIT
END

IF ~~ THEN JA#BRULG_17
  SAY @22
  IF ~~ THEN REPLY @23 GOTO JA#BRULG_18
  IF ~~ THEN REPLY @24 GOTO JA#BRULG_19
END

IF ~~ THEN JA#BRULG_18
  SAY @25
  IF ~~ THEN DO ~TakePartyGold(18) PlaySound("GAM_07")~ UNSOLVED_JOURNAL @1001 EXIT
END

IF ~~ THEN JA#BRULG_19
  SAY @26
  IF ~~ THEN UNSOLVED_JOURNAL @1001 EXIT
END

IF ~Global("JA#ELFSONG_QUEST","GLOBAL",3)~ THEN JA#BRULG_22
  SAY @27
  IF ~~ THEN REPLY @28 EXIT
END

IF ~Global("JA#ELFSONG_QUEST","GLOBAL",4)~ THEN JA#BRULG_23
  SAY @29
  IF ~~ THEN REPLY @30 EXIT
END

IF ~Global("JA#ELFSONG_QUEST","GLOBAL",5) Global("JA#ELFSONG_QUEST5","LOCALS",0)~ THEN JA#BRULG_24
  SAY @31
  IF ~~ THEN REPLY @32 GOTO JA#BRULG_25
END

IF ~~ THEN JA#BRULG_25
  SAY @33 = @34
  IF ~~ THEN DO ~SetGlobal("JA#ELFSONG_QUEST5","LOCALS",1)~ EXIT
END

IF ~Global("JA#ELFSONG_QUEST","GLOBAL",5) Global("JA#ELFSONG_QUEST5","LOCALS",1)~ THEN JA#BRULG_26
  SAY @35
  IF ~~ THEN REPLY @30 EXIT
END

IF ~Global("JA#ELFSONG_QUEST","GLOBAL",6) Global("JA#ELFSONG_QUEST6","LOCALS",0)~ THEN JA#BRULG_27
  SAY @36
  IF ~~ THEN REPLY @37 DO ~SetGlobal("JA#ELFSONG_QUEST6","LOCALS",1)~ GOTO JA#BRULG_28
END

IF ~~ THEN JA#BRULG_28
  SAY @38
  IF ~~ THEN DO ~SetGlobal("JA#ELFSONG_QUEST6","LOCALS",1)~ EXIT
END

IF ~Global("JA#ELFSONG_QUEST","GLOBAL",6) Global("JA#ELFSONG_QUEST6","LOCALS",1)~ THEN JA#BRULG_29
  SAY @35
  IF ~~ THEN REPLY @30 EXIT
END

IF ~GlobalGT("JA#ELFSONG_QUEST","GLOBAL",8) Global("JA#ELFSONG_QUEST8","LOCALS",0)~ THEN JA#BRULG_30
  SAY @39 = @40
  IF ~~ THEN DO ~SetGlobal("JA#ELFSONG_QUEST8","LOCALS",1) PlaySound("GAM_07")~ EXIT
END

IF ~GlobalGT("JA#ELFSONG_QUEST","GLOBAL",8) Global("JA#ELFSONG_QUEST8","LOCALS",1) RandomNum(3,1)~ THEN JA#BRULG_31
  SAY @41
  IF ~~ THEN EXIT
END

IF ~GlobalGT("JA#ELFSONG_QUEST","GLOBAL",8) Global("JA#ELFSONG_QUEST8","LOCALS",1) RandomNum(3,2)~ THEN JA#BRULG_32
  SAY @42
  IF ~~ THEN EXIT
END

IF ~GlobalGT("JA#ELFSONG_QUEST","GLOBAL",8) Global("JA#ELFSONG_QUEST8","LOCALS",1) RandomNum(3,3)~ THEN JA#BRULG_33
  SAY @43
  IF ~~ THEN EXIT
END


IF ~Global("JA#TALKTOBRULG","%EBaldursGate_ElfsongTavern_L1%",1)~ THEN JA#BRULG_4
  SAY @44
  IF ~~ THEN REPLY @45 DO ~SetGlobal("JA#TALKTOBRULG","%EBaldursGate_ElfsongTavern_L1%",2)~ GOTO JA#BRULG_5
  IF ~~ THEN REPLY @7 EXIT
END

IF ~~ THEN JA#BRULG_5
  SAY @46
  IF ~~ THEN EXIT
END

IF ~Global("JA#TALKTOBRULG","%EBaldursGate_ElfsongTavern_L1%",2) RandomNum(4,1)~ THEN JA#BRULG_6
  SAY @47
  IF ~~ THEN EXIT
END

IF ~Global("JA#TALKTOBRULG","%EBaldursGate_ElfsongTavern_L1%",2) RandomNum(4,2)~ THEN JA#BRULG_7
  SAY @48
  IF ~~ THEN EXIT
END

IF ~Global("JA#TALKTOBRULG","%EBaldursGate_ElfsongTavern_L1%",2) RandomNum(4,3)~ THEN JA#BRULG_8
  SAY @49
  IF ~~ THEN EXIT
END

IF ~Global("JA#TALKTOBRULG","%EBaldursGate_ElfsongTavern_L1%",2) RandomNum(4,4)~ THEN JA#BRULG_9
  SAY @50
  IF ~~ THEN EXIT
END

// END JA#BRULG


INTERJECT_COPY_TRANS2 JA#BRULG JA#BRULG_12 JA#kagain_brulgon1
  == %KAGAIN_JOINED% IF ~InParty("KAGAIN") InMyArea("KAGAIN") !StateCheck("KAGAIN",CD_STATE_NOTVALID)~ THEN @51
  == JA#BRULG @52
END
